<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Share Grid</title>

<style>
body {
  margin: 0;
  padding: 20px;
  background: radial-gradient(circle at top, #1a1a2e, #050508);
  color: white;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

header {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 16px;
}

button {
  background: linear-gradient(135deg, #ff4fd8, #7df9ff);
  border: none;
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 600;
  cursor: pointer;
}

.grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

@media (min-width: 900px) {
  .grid {
    grid-template-columns: repeat(6, 1fr);
  }
}

.slot {
  aspect-ratio: 1/1;
  border-radius: 18px;
  background: rgba(255,255,255,0.08);
  position: relative;
  overflow: hidden;
}

.slot img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.checkbox {
  position: absolute;
  top: 8px;
  left: 8px;
  transform: scale(1.4);
}

.empty {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 42px;
  opacity: 0.4;
  cursor: pointer;
}

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  align-items: center;
  justify-content: center;
}

.modal img {
  max-width: 90vw;
  max-height: 90vh;
  border-radius: 20px;
}
input[type=file] { display: none; }
</style>
</head>

<body>

<header>
  <button id="add">ADD</button>
  <button id="share">COPY LINK</button>
  <button id="download">DOWNLOAD SELECTED</button>
  <button id="reset">RESET</button>
</header>

<div class="grid" id="grid"></div>

<input type="file" id="file" accept="image/*" multiple>

<div class="modal" id="modal"><img id="modalImg"></div>

<script>
const grid = document.getElementById("grid");
const fileInput = document.getElementById("file");
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modalImg");

let images = [];

function encode() {
  return btoa(JSON.stringify(images));
}

function decode() {
  const hash = location.hash;
  if (!hash.startsWith("#DATA=")) return;
  try {
    images = JSON.parse(atob(hash.replace("#DATA=", "")));
  } catch {}
}

function render() {
  grid.innerHTML = "";
  images.forEach((src, i) => {
    const slot = document.createElement("div");
    slot.className = "slot";

    const img = document.createElement("img");
    img.src = src;
    img.onclick = () => {
      modalImg.src = src;
      modal.style.display = "flex";
    };

    const cb = document.createElement("input");
    cb.type = "checkbox";
    cb.className = "checkbox";
    cb.dataset.index = i;

    slot.appendChild(img);
    slot.appendChild(cb);
    grid.appendChild(slot);
  });

  const empty = document.createElement("div");
  empty.className = "slot empty";
  empty.textContent = "+";
  empty.onclick = () => fileInput.click();
  grid.appendChild(empty);
}

fileInput.onchange = () => {
  [...fileInput.files].forEach(file => {
    const r = new FileReader();
    r.onload = e => {
      images.push(e.target.result);
      render();
    };
    r.readAsDataURL(file);
  });
};

document.getElementById("share").onclick = () => {
  const url = location.origin + location.pathname + "#DATA=" + encode();
  navigator.clipboard.writeText(url);
  alert("Link copiat!");
};

document.getElementById("download").onclick = () => {
  document.querySelectorAll(".checkbox:checked").forEach(cb => {
    const img = images[cb.dataset.index];
    const a = document.createElement("a");
    a.href = img;
    a.target = "_blank";
    a.click();
  });
};

document.getElementById("reset").onclick = () => {
  images = [];
  location.hash = "";
  render();
};

modal.onclick = () => modal.style.display = "none";

decode();
render();
</script>

</body>
</html>